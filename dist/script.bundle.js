(()=>{function e(){fetch("https://ideaapi.azurewebsites.net/").then((e=>e.json())).then((e=>n(e)))}function n(e){document.getElementById("YEdiv").innerHTML=e+"<br><cite>-Kanye West</cite>"}window.addEventListener("load",(function(){console.log("Loaded."),e(),"Notification"in window?"granted"==Notification.permission?console.log("Permission granted before."):"denied"!==Notification.permission?Notification.requestPermission().then((e=>{"granted"==e&&(new Notification("Vives!"),console.log("Permission granted."))})):console.log("Permission denied. No Notification will be send."):console.log("Notification are not supported by your browser.")})),document.addEventListener("click",(function(n){"YE"==n.target.id&&e()})),window.addEventListener("offline",(e=>{console.log("The network connection has been lost."),n({quote:"Your offline. Please connect to the web"})})),window.addEventListener("online",(n=>{e()}))})(),(()=>{"use strict";const e=document.querySelector("#YE");let n=!1,o=null;function i(){if("denied"===Notification.permission)return e.textContent="Push Messaging Blocked.",e.disabled=!0,void t(null);e.textContent=n?"Disable Push Messaging":"Enable Push Messaging",e.disabled=!1}function t(e){const n=document.querySelector(".js-subscription-json"),o=document.querySelector(".js-subscription-details");e?(n.textContent=JSON.stringify(e),o.classList.remove("is-invisible")):o.classList.add("is-invisible")}function s(){e.addEventListener("click",(function(){e.disabled=!0,n?o.pushManager.getSubscription().then((function(e){if(e)return e.unsubscribe()})).catch((function(e){console.log("Error unsubscribing",e)})).then((function(){t(null),console.log("User is unsubscribed."),n=!1,i()})):function(){const e=function(e){const n=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),o=window.atob(n),i=new Uint8Array(o.length);for(let e=0;e<o.length;++e)i[e]=o.charCodeAt(e);return i}("pve6LQ79BFRgrmh4CV9MWYfDl3xLu-C3SIQcVXTYaQgBPk-yV49F5y-J59t3SNzK0fyGE6w0xxXbKVzNOHFDR9i4rpo46gs_qX6k1PfjEQp4qGoy--fUGCGiBbDlEHvDAY");o.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e}).then((function(e){console.log("User is subscribed."),t(e),console.log("test"+e),n=!0,i()})).catch((function(e){console.log("Failed to subscribe the user: ",e),i()}))}()})),o.pushManager.getSubscription().then((function(e){n=!(null===e),t(e),n?console.log("User IS subscribed."):console.log("User is NOT subscribed."),i()}))}"serviceWorker"in navigator&&"PushManager"in window?(console.log("Service Worker and Push is supported"),navigator.serviceWorker.register("sw.js").then((function(e){console.log("Service Worker is registered",e),o=e,s()})).catch((function(e){console.error("Service Worker Error",e)}))):(console.warn("Push messaging is not supported"),e.textContent="Push Not Supported")})();